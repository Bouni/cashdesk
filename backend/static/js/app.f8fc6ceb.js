(function(t){function e(e){for(var n,r,s=e[0],c=e[1],l=e[2],v=0,d=[];v<s.length;v++)r=s[v],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==o[c]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},i=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/static/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("Navigation"),a("v-container",[a("router-view")],1)],1)},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",[a("v-toolbar",{staticClass:"secondary lighten-4"},[a("v-layout",{attrs:{"align-center":""}},[a("v-toolbar-title",[a("div",{staticClass:"d-inline"},[a("v-img",{attrs:{src:"/static/img/reaktor-logo.png",height:"50px",contain:""},on:{click:t.goHome}})],1)]),a("div",{staticClass:"font-weight-light text-uppercase ml-4 mt-2 d-inline"},[t._v("cashdesk")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",to:{name:"Settings"}}},[a("v-icon",[t._v("mdi-cog")])],1)],1)],1)],1)},s=[],c={methods:{goHome:function(){return this.$router.push("/").catch((function(){}))}}},l=c,u=a("2877"),v=a("6544"),d=a.n(v),m=a("8336"),f=a("132d"),p=a("adda"),g=a("a722"),h=a("2fa4"),b=a("71d9"),k=a("2a7f"),C=Object(u["a"])(l,r,s,!1,null,null,null),_=C.exports;d()(C,{VBtn:m["a"],VIcon:f["a"],VImg:p["a"],VLayout:g["a"],VSpacer:h["a"],VToolbar:b["a"],VToolbarTitle:k["a"]});var y={name:"App",components:{Navigation:_},data:function(){return{}}},x=y,w=a("7496"),V=a("a523"),j=Object(u["a"])(x,o,i,!1,null,null,null),T=j.exports;d()(j,{VApp:w["a"],VContainer:V["a"]});var S=a("8c4f"),D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("v-container",[a("v-row",t._l(t.accounts,(function(e){return a("v-col",{key:e.id,attrs:{cols:"12",sm:"12",md:"3"}},[a("v-card",{attrs:{to:{name:"Account",params:{owner:e.owner}}}},[a("v-card-title",{staticClass:"justify-center"},[t._v(" "+t._s(e.owner)+" ")]),a("v-card-text",[a("v-row",[a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12",sm:"12"}},[a("v-avatar",{attrs:{color:"grey",size:"128"}},[a("img",{attrs:{src:"https://avatars.dicebear.com/api/bottts/"+e.owner+".svg"}})])],1),a("v-col",{class:[t.balanceColor(e.balance),"d-flex justify-center balance"],attrs:{cols:"12",sm:"12"}},[t._v(" Guthaben "+t._s(t._f("euro")(e.balance))+" ")])],1)],1)],1)],1)})),1)],1)],1)},O=[],A=(a("a9e3"),a("c35a"),a("b680"),a("d3b7"),{name:"Home",data:function(){return{accounts:[]}},filters:{euro:function(t){return Number.parseFloat(t).toFixed(2)+" €"}},methods:{balanceColor:function(t){return t>0?"green--text":0==t?"amber--text":"red--text"}},mounted:function(){var t=this;fetch("api/accounts/").then((function(t){return t.json()})).then((function(e){t.accounts=e}))}}),I=A,P=(a("7b0c"),a("8212")),$=a("b0af"),F=a("99d9"),z=a("62ad"),E=a("0fd9"),L=Object(u["a"])(I,D,O,!1,null,"368bf244",null),N=L.exports;d()(L,{VAvatar:P["a"],VCard:$["a"],VCardText:F["c"],VCardTitle:F["d"],VCol:z["a"],VContainer:V["a"],VRow:E["a"]});var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Account"},[a("v-container",[a("v-row",[a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12",sm:"12"}},[a("v-btn",{attrs:{"x-large":"",to:{name:"Home"}}},[a("v-icon",[t._v("mdi-reply")]),t._v(" Back ")],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[a("v-card",[a("v-card-title",{staticClass:"justify-center"},[t._v(" "+t._s(t.account.owner)+" ")]),a("v-card-text",[a("v-row",[a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12",sm:"12",md:"12"}},[a("v-avatar",{attrs:{color:"grey",size:"128"}},[a("img",{attrs:{src:"https://avatars.dicebear.com/api/bottts/"+t.account.owner+".svg"}})])],1),a("v-col",{class:[t.balanceColor(t.account.balance),"d-flex justify-center"],attrs:{cols:"12",sm:"12",md:"12"}},[a("span",{staticClass:"balance"},[t._v("Guthaben "+t._s(t._f("euro")(t.account.balance)))])])],1)],1)],1),a("v-card",{staticClass:"mt-3"},[a("div",{staticClass:"text-center"},[a("div",{staticClass:"py-5"},[a("v-btn",{staticClass:"mt-3",attrs:{"x-large":"",color:"amber",dark:""},on:{click:function(e){t.vendDialog=!0}}},[a("v-icon",{staticClass:"mr-4",attrs:{large:""}},[t._v("mdi-bottle-soda-classic-outline")]),t._v(" Getränk kaufen")],1),a("v-dialog",{attrs:{width:"auto "},model:{value:t.vendDialog,callback:function(e){t.vendDialog=e},expression:"vendDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Getränk kaufen")])]),a("v-card-text",[a("v-container",[a("v-row",{attrs:{dense:""}},t._l(t.items,(function(e){return a("v-col",{key:e.id,attrs:{cols:"12",sm:"12",md:"4"}},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[e.stock?a("v-card",{attrs:{dark:""},on:{click:function(a){return t.vendItem(e)}}},[a("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[a("div",[a("v-card-title",{staticClass:"headline"},[t._v(t._s(e.brand))]),a("v-card-subtitle",[a("div",{staticClass:"balance"},[t._v(t._s(e.name))]),a("div",{staticClass:"balance mt-3"},[t._v(t._s(t._f("euro")(e.price)))])])],1),a("v-avatar",{staticClass:"ma-3",attrs:{size:"7em",tile:""}},[a("v-img",{attrs:{contain:"","max-height":"7em",src:e.image}})],1)],1)]):a("v-card",{staticClass:"grey lighten-3"},[a("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[a("div",[a("v-card-title",{staticClass:"headline grey--text"},[t._v(t._s(e.brand))]),a("v-card-subtitle",[a("div",{staticClass:"balance grey--text"},[t._v(t._s(e.name))]),a("div",{staticClass:"balance mt-3 grey--text"},[t._v(t._s(t._f("euro")(e.price)))])])],1),a("v-avatar",{staticClass:"ma-3",attrs:{size:"7em",tile:""}},[a("v-img",{staticStyle:{filter:"grayscale(100%)"},attrs:{contain:"","max-height":"7em",src:e.image}})],1)],1)])],1)],1)],1)})),1)],1)],1)],1)],1)],1),a("div",{staticClass:"py-5"},[a("v-btn",{staticClass:"mb-3",attrs:{"x-large":"",color:"success",dark:""},on:{click:function(e){t.depositDialog=!0}}},[a("v-icon",{staticClass:"mr-4",attrs:{large:""}},[t._v("mdi-cash-plus")]),t._v(" Konto aufladen")],1),a("v-dialog",{attrs:{width:"auto "},model:{value:t.depositDialog,callback:function(e){t.depositDialog=e},expression:"depositDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Konto aufladen")])]),a("v-card-text",[a("v-container",[a("v-row",{attrs:{dense:""}},t._l(t.euros,(function(e){return a("v-col",{key:e.value,attrs:{cols:"12",sm:"12",md:"4"}},[a("v-container",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{dark:""},on:{click:function(a){return t.depositCash(e.value)}}},[a("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[a("div",[a("v-card-title",{staticClass:"headline"},[t._v(t._s(e.value)+"€")])],1),a("v-avatar",{staticClass:"ma-3",attrs:{size:"7em",tile:""}},[a("v-img",{attrs:{contain:"","max-height":"7em",src:e.image}})],1)],1)])],1)],1)],1)],1)})),1)],1)],1)],1)],1)],1)])])],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[a("v-card",[a("v-card-title",{staticClass:"justify-center"},[t._v(" Buchungen ")]),a("v-card-text",[a("v-list",{attrs:{"two-line":""}},t._l(t.account.transaction,(function(e){return a("v-list-item",{key:e.id,on:{click:function(a){return t.askRevokeTransaction(e)}}},[a("v-list-item-content",[a("v-list-item-title",{class:t.striked(e.revoked),domProps:{textContent:t._s(e.comment)}}),a("v-list-item-subtitle",{class:t.striked(e.revoked)},[t._v(t._s(t._f("date")(e.timestamp)))])],1),a("v-list-item-action",[a("v-list-item-action-text",{class:[t.balanceColor(e.value),t.striked(e.revoked)],staticStyle:{"font-size":"150%"}},[t._v(" "+t._s(t._f("euro")(e.value))+" ")])],1)],1)})),1)],1)],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.revokeDialog,callback:function(e){t.revokeDialog=e},expression:"revokeDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Transaktion streichen?")])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1"},on:{click:function(e){t.revokeDialog=!1,t.revokeTarget=null}}},[t._v(" Abbrechen ")]),a("v-btn",{attrs:{color:"green darken-1"},on:{click:t.revokeTransaction}},[t._v(" Streichen ")])],1)],1)],1)],1)],1)],1)],1)},H=[],J=(a("b0c0"),{name:"Account",props:["owner"],data:function(){return{account:{owner:"",balance:0},vendDialog:!1,depositDialog:!1,revokeDialog:!1,revokeTarget:null,items:[],euros:[{value:.5,image:"/static/img/euro-0.5.png"},{value:1,image:"/static/img/euro-1.png"},{value:2,image:"/static/img/euro-2.png"},{value:5,image:"/static/img/euro-5.png"},{value:10,image:"/static/img/euro-10.png"},{value:20,image:"/static/img/euro-20.png"},{value:50,image:"/static/img/euro-50.png"}]}},filters:{euro:function(t){return Number.parseFloat(t).toFixed(2)+" €"},date:function(t){var e={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};return new Date(t).toLocaleDateString("de-DE",e)}},methods:{vendItem:function(t){var e=this,a={timestamp:(new Date).toISOString(),value:-1*t.price,comment:t.brand+" "+t.name,type:"gui",account:this.account.id};fetch("api/transactions/",{body:JSON.stringify(a),method:"POST",headers:{"X-CSRFToken":this.$cookies.get("csrftoken"),Accept:"application/json","Content-Type":"application/json"}}).then((function(){e.account.balance-=t.price,e.account.transaction.unshift(a),e.vendDialog=!1}))},depositCash:function(t){var e=this,a={timestamp:(new Date).toISOString(),value:t,comment:"Einzahlung",type:"gui",account:this.account.id};fetch("api/transactions/",{body:JSON.stringify(a),method:"POST",headers:{"X-CSRFToken":this.$cookies.get("csrftoken"),Accept:"application/json","Content-Type":"application/json"}}).then((function(){e.account.balance+=t,e.account.transaction.unshift(a),e.depositDialog=!1}))},askRevokeTransaction:function(t){this.revokeTarget=t,this.revokeDialog=!0},revokeTransaction:function(){var t=this;fetch("api/transactions/"+this.revokeTarget.id+"/",{body:JSON.stringify({revoked:!this.revokeTarget.revoked}),method:"PATCH",headers:{"X-CSRFToken":this.$cookies.get("csrftoken"),Accept:"application/json","Content-Type":"application/json"}}).then((function(){t.revokeTarget=null,t.revokeDialog=!1,t.loadAccount(t.account.owner)}))},loadAccount:function(t){var e=this;fetch("api/accounts/"+t+"/").then((function(t){return t.json()})).then((function(t){e.account=t}))},loadItems:function(){var t=this;fetch("api/items/").then((function(t){return t.json()})).then((function(e){t.items=e}))},balanceColor:function(t){return t>0?"green--text":0==t?"amber--text":"red--text"},striked:function(t){return t?"text-decoration-line-through":""}},mounted:function(){this.loadAccount(this.$route.params.owner),this.loadItems()}}),B=J,G=(a("a194"),a("169a")),M=a("8860"),X=a("da13"),K=a("1800"),q=a("5d23"),Q=Object(u["a"])(B,R,H,!1,null,"55b1c33b",null),U=Q.exports;d()(Q,{VAvatar:P["a"],VBtn:m["a"],VCard:$["a"],VCardActions:F["a"],VCardSubtitle:F["b"],VCardText:F["c"],VCardTitle:F["d"],VCol:z["a"],VContainer:V["a"],VDialog:G["a"],VIcon:f["a"],VImg:p["a"],VList:M["a"],VListItem:X["a"],VListItemAction:K["a"],VListItemActionText:q["a"],VListItemContent:q["b"],VListItemSubtitle:q["c"],VListItemTitle:q["d"],VRow:E["a"],VSpacer:h["a"]});var W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"settings"},[a("v-container",[a("v-card",[a("v-card-title",{staticClass:"justify-center"},[t._v(" Getränke ")]),a("v-card-text",t._l(t.items,(function(e){return a("v-row",{key:e.id,attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{xs:"12",lg:"2"}},[e.stock?a("v-avatar",{staticClass:"ma-3",attrs:{size:"5em",tile:""}},[a("v-img",{attrs:{contain:"","max-height":"5em",src:e.image}})],1):a("v-avatar",{staticClass:"ma-3",attrs:{size:"5em",tile:""}},[a("v-img",{staticStyle:{filter:"grayscale(100%)"},attrs:{contain:"","max-height":"5em",src:e.image}})],1)],1),a("v-col",{class:[e.stock?"":"grey--text","headline"],attrs:{xs:"6",lg:"6"}},[t._v(" "+t._s(e.brand)+" "+t._s(e.name)+" ")]),a("v-col",{class:[e.stock?"":"grey--text","headline"],attrs:{xs:"3",lg:"1"}},[t._v(" "+t._s(t._f("euro")(e.price))+" ")]),a("v-col",{staticClass:"headline",attrs:{xs:"3",lg:"1"}},[e.stock?a("v-btn",{on:{click:function(a){return t.toggleStock(e)}}},[a("v-icon",[t._v("mdi-minus")])],1):a("v-btn",{on:{click:function(a){return t.toggleStock(e)}}},[a("v-icon",[t._v("mdi-plus")])],1)],1)],1)})),1)],1)],1)],1)},Y=[],Z={name:"Settings",data:function(){return{items:[]}},filters:{euro:function(t){return Number.parseFloat(t).toFixed(2)+" €"}},methods:{textColor:function(t){if(t)return"grey--text"},toggleStock:function(t){var e=this;fetch("api/items/"+t.id+"/",{body:JSON.stringify({stock:!t.stock}),method:"PATCH",headers:{"X-CSRFToken":this.$cookies.get("csrftoken"),Accept:"application/json","Content-Type":"application/json"}}).then((function(){e.loadItems()}))},loadItems:function(){var t=this;fetch("api/items/").then((function(t){return t.json()})).then((function(e){t.items=e}))}},mounted:function(){this.loadItems()}},tt=Z,et=Object(u["a"])(tt,W,Y,!1,null,null,null),at=et.exports;d()(et,{VAvatar:P["a"],VBtn:m["a"],VCard:$["a"],VCardText:F["c"],VCardTitle:F["d"],VCol:z["a"],VContainer:V["a"],VIcon:f["a"],VImg:p["a"],VRow:E["a"]}),n["a"].use(S["a"]);var nt=[{path:"/",name:"Home",component:N},{path:"/account/:owner",name:"Account",component:U},{path:"/settings",name:"Settings",component:at},{path:"*",component:N}],ot=new S["a"]({routes:nt});ot.beforeEach((function(t,e,a){document.title="CASHDESK",a()}));var it=ot,rt=a("f309");n["a"].use(rt["a"]);var st=new rt["a"]({}),ct=a("2b27"),lt=a.n(ct);n["a"].use(lt.a),n["a"].config.productionTip=!1,new n["a"]({router:it,vuetify:st,render:function(t){return t(T)}}).$mount("#app")},"7b0c":function(t,e,a){"use strict";var n=a("848b"),o=a.n(n);o.a},"848b":function(t,e,a){},a194:function(t,e,a){"use strict";var n=a("ded1"),o=a.n(n);o.a},ded1:function(t,e,a){}});
//# sourceMappingURL=app.f8fc6ceb.js.map